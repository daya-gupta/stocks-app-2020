(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{129:function(t,e,a){},132:function(t,e,a){},135:function(t,e,a){},136:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=a(13),l=(a(89),a(90),a(26));var s=Object(i.b)((function(t){return{common:t.common}}),{})((function(){return r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"navbar navbar-expand-sm navbar-light"},r.a.createElement("span",{className:"navbar-brand"},"Stock Analysis"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"Company")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/watchlist"},"Watchlist")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/comparision"},"Comparision"))))))})),u=a(11),m=a(18),p=a(14),h=a(12),d=a(15),f=(a(52),[{id:30,label:"1m"},{id:90,label:"3m"},{id:180,label:"6m"},{id:400,label:"1Yr"},{id:1080,label:"3Yr"},{id:1800,label:"Max"}]),v={activeWatchlistIndex:0,watchlistData:[{name:"Master",companies:[]}],metadata:{hdfcbank:{note:"good results!!",color:0}}},g=[0,1,2,4,9,13,26,52,104,156,260],b=function(){return JSON.parse(localStorage.getItem("app-data"))||v},y=function(t){localStorage.setItem("app-data",JSON.stringify(t))},E=function(){var t=b(),e=t.activeWatchlistIndex,a=t.watchlistData[e];if("Primary"===a.name){var n=t.watchlistData[0].companies.filter((function(e){return!t.metadata[e.id]||!t.metadata[e.id].color||"a"===t.metadata[e.id].color}));a.companies=n}else if("Secondary"===a.name){var r=t.watchlistData[0].companies.filter((function(e){return t.metadata[e.id]&&"c"===t.metadata[e.id].color}));a.companies=r}else if("Test"===a.name){var c=t.watchlistData[0].companies.filter((function(e){return t.metadata[e.id]&&"b"===t.metadata[e.id].color}));a.companies=c}return a},C=function(t){var e=b(),a=e.activeWatchlistIndex;e.watchlistData[a]=t,localStorage.setItem("app-data",JSON.stringify(e))},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.datasets||!t.datasets[0])return[];var a=t.datasets[0].values,n=t.datasets[1].values,r=a.map((function(t,e){return{date:t[0],price:Number(t[1]),volume:Number(n[e][1]),revenue:null,profit:null}}));return e.quarter&&e.quarter.map((function(t,a){var n=r.findIndex((function(e){return e.date.substr(0,7)===t}));-1!==n&&(r[n].revenue=Number(e.revenue[a]),r[n].profit=Number(e.profit[a]))})),r},D=function(t,e){var a=t.reduce((function(t,a){return t+(Number(a.priceChange[e])||0)}),0);return t.length?(a/t.length).toFixed(2):"NA"},O=function(t){var e=t.length,a=0;if(e>=6)for(var n=4;n<e;n++)if(t[n]<0)a-=2;else{var r=t[n-4];r<0||(t[n]>1.5*r?a+=3:t[n]>1.25*r?a+=2:t[n]>1.1*r?a+=1:t[n]<.7*r?a-=2:t[n]<.9*r&&(a-=1))}return a},S=function(t){var e=t.message,a=t.isHtml,n=void 0!==a&&a,r=t.messageType;return{type:"SET_ERROR",data:{message:e,isHtml:n,messageType:void 0===r?"error":r}}},k=function(t,e,a){var n=b(),r=n.metadata||{},c=r[t]||{};return c[e]=a,n.metadata[t]=c,y(n),{type:"METADATA_CHANGED",data:r}},N=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={addFlow:!1},a.selectWatchlist=function(t){a.props.selectWatchlist(t),a.toggleWatchlistContainer()},a.addNewWatchlist=function(){a.setState({addFlow:!0}),a.toggleWatchlistContainer()},a.confirmNewWatchlist=function(t){if(t){var e=a.nameInput.value;e&&a.props.addNewWatchlist(e)}a.setState({addFlow:!1})},a.toggleWatchlistContainer=function(){a.setState({toggleWatchlistContainer:!a.state.toggleWatchlistContainer})},a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this,e=this.props.common,a=e.watchlistData,n=e.activeWatchlistIndex,c=a[n].name;return r.a.createElement("div",{className:"pull-right toggleWatchlistContainer"},r.a.createElement("button",{className:"custom-button",onClick:this.toggleWatchlistContainer},"Watchlist: ",r.a.createElement("b",null,c)),this.state.toggleWatchlistContainer&&r.a.createElement("div",{className:"listContainer"},a.map((function(e,a){var c=a===n?{fontWeight:800}:{};return r.a.createElement("li",{onClick:function(){return t.selectWatchlist(a)},style:c},e.name)})),r.a.createElement("li",null,r.a.createElement("button",{style:{background:"#aaa",color:"white"},className:"custom-button",onClick:this.addNewWatchlist},"Add new list"))),this.state.addFlow&&r.a.createElement("div",{className:"addWatchlistContainer"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:function(e){t.nameInput=e},placeholder:"Watchlist name..."}),r.a.createElement("button",{className:"custom-button",onClick:function(){return t.confirmNewWatchlist(!0)}},"Save"),"\xa0\xa0",r.a.createElement("button",{className:"custom-button",onClick:this.confirmNewWatchlist},"Cance"))))}}]),e}(r.a.PureComponent),x={selectWatchlist:function(t){var e=b();return e.activeWatchlistIndex=t,y(e),{type:"ACTIVE_WATCHLIST_CHANGED",data:t}},addNewWatchlist:function(t){var e=b();return e.watchlistData.push({name:t,companies:[]}),y(e),{type:"NEW_WATCHLIST_ADDED",data:e}}},j=Object(i.b)((function(t){return{common:t.common}}),x)(N),A=a(10),W=(a(92),a(50)),I=Object(W.b)(W.a),L=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={isLoading:!1,options:[]},a.selectCompany=function(t){a.setState({options:[]}),a.props.selectCompany(t)},a._handleSearch=function(t){a.setState({isLoading:!0}),a.props.searchCompany(t,(function(t){a.setState({isLoading:!1,options:t})}))},a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(n.Fragment,null,r.a.createElement(I,{id:"stock-typeahead",isLoading:this.state.isLoading,labelKey:"name",onSearch:this._handleSearch,options:this.state.options||[],placeholder:"Search for a company...",onChange:function(e){e.length&&t.props.selectCompany(e[0])}}))}}]),e}(r.a.Component),T=a(20),_=a.n(T),R=a(27),H=a.n(R),P=a(37),M=a.n(P),q=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(m.a)(e,[{key:"categoriesGenerator",value:function(){var t=[];return this.props.processedData.forEach((function(e){t=e.map((function(t){return t.date}))})),t}},{key:"getSeriesData",value:function(t,e){var a=[],n=this.props.chartType;switch(n){case"line":case"spline":case"bar":var r=t.map((function(t){return t.price}));a.push({type:n,name:"".concat(e,"_price"),data:r});var c=t.map((function(t){return t.volume}));a.push({type:"column",name:"".concat(e,"_volume"),data:c,yAxis:1});var o=t.map((function(t){return t.revenue}));a.push({type:"column",name:"".concat(e,"_revenue"),data:o,yAxis:2});var i=t.map((function(t){return t.profit}));a.push({type:"spline",name:"".concat(e,"_profit"),data:i,yAxis:3,connectNulls:!0});break;case"combined":var l=t.map((function(t){return Number(t.price)}));a.push({type:"line",name:e,data:l}),a.push({type:"column",name:e,data:l})}return a}},{key:"getData",value:function(){var t=this,e=[];this.props.processedData.forEach((function(a,n){var r=t.props.compareList[n].name;e.push(t.getSeriesData(a,r))}));var a=[];return e.forEach((function(t){t.forEach((function(t){a.push(t)}))})),a}},{key:"render",value:function(){var t=1===this.props.compareList.length?"Chart for ".concat(this.props.compareList[0].name):"Comparision chart",e={legend:{align:"center",verticalAlign:"bottom",layout:"vertical",x:-50},yAxis:[{title:{text:"Price"}},{title:{text:"Volume"},opposite:!0},{title:{text:"Revenue"}},{title:{text:"Profit"},opposite:!0}],xAxis:{title:{text:"date"},categories:this.categoriesGenerator()},labels:{items:[{style:{left:"50px",top:"18px",color:H.a.theme&&H.a.theme.textColor||"black"}}]},title:{text:t},series:this.getData()};return r.a.createElement("div",null,r.a.createElement(M.a,{highcharts:H.a,options:e}))}}]),e}(n.Component),F=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(c)))).state={selectedCompany:{id:3365,name:"Tata Consultancy Services Ltd",url:"/company/TCS/consolidated/"},historicalData:[],consolidatedData:[],duration:1080,chartType:"spline"},a.historicalDataCallback=function(t){a.setState({historicalData:t})},a.consolidatedDataCallback=function(t){a.setState({consolidatedData:t})},a.selectCompany=function(t){var e=Object(A.a)({},t);a.setState({selectedCompany:e});var n=a.state.duration,r=t.id,c=t.url;a.props.getHistoricalData({companyId:r,duration:n},a.historicalDataCallback),a.props.getConsolidatedData({url:c},a.consolidatedDataCallback)},a.renderChart=function(){var t=a.state.historicalData,e=a.state.consolidatedData,n=w(t,e);return r.a.createElement(q,{chartType:a.state.chartType,processedData:[n],compareList:[a.state.selectedCompany]})},a.addToWatchlist=function(){var t=a.state.selectedCompany,e=E(),n=null;0===e.companies.filter((function(e){return e.id===t.id})).length?(e.companies.push(t),C(e),n="Stock added successfully"):n="Stock already exist in the watchlist";var r={message:n};a.props.setError(r)},a.changeDuration=function(t){a.setState({duration:t});var e=a.state.selectedCompany.id;a.props.getHistoricalData({companyId:e,duration:t},a.historicalDataCallback)},a.renderDuration=function(){return r.a.createElement("div",{className:"btn-group pull-left mr-2 mb-2",role:"group","aria-label":"Basic example"},f.map((function(t){var e=a.state.duration===t.id?"active":"";return r.a.createElement("button",{type:"button",className:"btn btn-secondary ".concat(e),disabled:!a.state.selectedCompany,onClick:function(){return a.changeDuration(t.id)}},t.label)})))},a.render=function(){return r.a.createElement("div",{id:"company"},r.a.createElement("div",{className:"row ml-4 mr-4 mt-5 mb-5"},r.a.createElement("div",{className:"col-md-12 col-lg-8 company-actions"},a.renderDuration(),a.state.selectedCompany&&r.a.createElement("button",{className:"btn btn-primary pull-left mb-2",onClick:a.addToWatchlist},"Add to watchlist")),r.a.createElement("div",{className:"col-md-12 col-lg-4"},r.a.createElement(L,{searchCompany:a.props.searchCompany,selectCompany:a.selectCompany}))),r.a.createElement("div",{className:"col-12"},a.renderChart()))},a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=this.state.duration,e=this.state.selectedCompany.id,a=this.state.selectedCompany.url;this.props.getHistoricalData({companyId:e,duration:t},this.historicalDataCallback),this.props.getConsolidatedData({url:a},this.consolidatedDataCallback)}}]),e}(n.Component),B={getHistoricalData:function(t,e){var a=t.companyId,n=t.duration;return function(t){t({type:"SHOW_LOADER"}),_.a.get("http://localhost:3300/historicalData?companyId=".concat(a,"&duration=").concat(n)).then((function(a){t({type:"HIDE_LOADER"}),e(a.data)}))}},getConsolidatedData:function(t,e){var a=t.url;return function(t){t({type:"SHOW_LOADER"}),_.a.get("http://localhost:3300/consolidatedData?url=".concat(a)).then((function(a){t({type:"HIDE_LOADER"});var n=function(t){var e={quarter:[],revenue:[],profit:[]},a=(new DOMParser).parseFromString(t,"text/html").querySelectorAll("body #quarters table tr"),n=a[0].querySelectorAll("th"),r=a[1].querySelectorAll("td"),c=a[10].querySelectorAll("td");return n.forEach((function(t,a){if(a){var o=function(t){var e=t.split(" "),a=e[1],n=function(t){switch(t.toLowerCase()){case"mar":return"03";case"jun":return"06";case"sep":return"09";case"dec":return"12"}}(e[0]);return"".concat(a,"-").concat(n)}((n[a].textContent||"").trim());e.quarter.push(o),e.revenue.push((r[a].textContent||"").replace(/,/g,"").trim()),e.profit.push((c[a].textContent||"").replace(/,/g,"").trim())}})),e}(a.data);e(n)})).catch((function(e){var a=e.message;t({type:"SET_ERROR",data:{message:a,isHtml:!1,messagetype:"error"}})}))}},searchCompany:function(t,e){return function(a){a({type:"SHOW_LOADER"}),_.a.get("http://localhost:3300/searchCompany?data=".concat(t)).then((function(t){a({type:"HIDE_LOADER"}),e(t.data)}))}},setError:S},V=Object(i.b)((function(t){return{company:t.company,common:t.common}}),B)(F),G=a(29),J=(a(129),a(49)),z=a.n(J),Y=a(40),K=function(t){var e={quarter:[],revenue:[],profit:[]},a=(new DOMParser).parseFromString(t,"text/html").querySelectorAll("body #quarters table tr");if(a&&a.length){var n=a[0].querySelectorAll("th"),r=a[1].querySelectorAll("td"),c=a[10].querySelectorAll("td");n.forEach((function(t,a){if(a){var o=function(t){var e=t.split(" "),a=e[1],n=function(t){switch(t.toLowerCase()){case"mar":return"03";case"jun":return"06";case"sep":return"09";case"dec":return"12"}}(e[0]);return"".concat(a,"-").concat(n)}((n[a].textContent||"").trim());e.quarter.push(o),e.revenue.push((r[a].textContent||"").replace(/,/g,"").trim()),e.profit.push((c[a].textContent||"").replace(/,/g,"").trim())}}))}return e},X=a(39),Z=a(71),$=a(72),Q=["a","b","c","d"],U=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(c)))).state={},a.toggleOptions=function(){var t=!a.state.showOptions;a.setState({showOptions:t,showNote:!1})},a.toggleNote=function(){var t=!a.state.showNote;a.setState({showNote:t,showOptions:!1})},a.updateMetadata=function(t,e,n){"color"===e?a.setState({showOptions:!1}):"note"===e&&(n=a.textarea.value,a.setState({showNote:!1})),a.props.dispatch(a.props.updateMetadata(t,e,n))},a.moveStock=function(t){a.toggleOptions(),a.props.moveStock(t)},a.render=function(){var t=a.state,e=t.showOptions,n=t.showNote,c=a.props.common.watchlistData,o=a.props,i=o.item,l=o.common.metadata||{},s=(l[i.id]||{}).note,u=(l[i.id]||{}).color,m="coloredCircle ".concat(u);return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{margin:"3px"},className:m,onClick:a.toggleOptions}),r.a.createElement("button",{className:"custom-button",onClick:a.toggleNote},"i"),n&&r.a.createElement("div",{style:{width:"auto"},className:"moreActions"},r.a.createElement("button",{style:{margin:"-6px, -6px, 0 0"},className:"custom-button pull-right",onClick:a.toggleNote},"\xd7"),r.a.createElement("h6",{class:"pull-left"},i.name),r.a.createElement("div",null,r.a.createElement("textarea",{ref:function(t){return a.textarea=t},defaultValue:s})),r.a.createElement("button",{style:{background:"white"},className:"pull-right",onClick:function(){return a.updateMetadata(i.id,"note")}},"Save")),e&&r.a.createElement("div",{className:"moreActions"},Q.map((function(t){var e="coloredCircle ".concat(t);return r.a.createElement("span",{className:e,onClick:function(){return a.updateMetadata(i.id,"color",t)}})})),r.a.createElement("hr",null),r.a.createElement("b",null,"Move to:"),c.map((function(t,e){return r.a.createElement("li",{className:"moveOptions",onClick:function(){return a.moveStock(e)}},t.name)}))))},a}return Object(d.a)(e,t),e}(r.a.PureComponent),tt=Object(i.b)((function(t){return{common:t.common}}),(function(t){return{updateMetadata:k,dispatch:t}}))(U);function et(){var t=Object(Z.a)(["\n    font-size: 10px,\n    color: #fa3,\n    cursor: pointer\n"]);return et=function(){return t},t}var at=$.a.button(et()),nt=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(c)))).render=function(){var t=a.props,e=t.item,n=t.index,c=t.handleCheckboxChange,o=t.renderChart,i=t.removeStock,l=t.moveStock,s=(t.watchlist,t.watchlistData),u=t.priceChangeRange,m=e.growthScore.revenueScore,p=e.growthScore.profitScore,h=e.name,d=e.url,f=e.checked;e.change;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,r.a.createElement(X.a.Check,{type:"checkbox",checked:f,onChange:c})),r.a.createElement("td",null,r.a.createElement(tt,{item:e,moveStock:l,watchlistData:s})),r.a.createElement("td",null,m,", ",p),r.a.createElement("td",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.screener.in".concat(d)},h)),g.map((function(t,a){var n=e.priceChange[t],c=u[a],o=c[0],i=c[1],l=0,s=0,m=1;if(o>0);else if(i<0);else{if(n>0)s=256,m=(i-n)/i;else l=256,m=(o-n)/o}var p={backgroundColor:"rgba(".concat(l,", ").concat(s,", ").concat(0,", ").concat(1-m,")")};return r.a.createElement("td",{style:p},!a&&r.a.createElement("span",null,e.price," \xa0"),n," %")})),r.a.createElement("td",null,r.a.createElement(at,{className:"fa fa-times",onClick:function(){return i(n)}})),r.a.createElement("td",null,o(e.historicalData,n)))},a}return Object(d.a)(e,t),e}(r.a.PureComponent),rt=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(m.a)(e,[{key:"getSeriesData",value:function(t){var e=[];return e.push({type:"spline",name:"price",data:t.price}),e.push({type:"column",name:"volume",data:t.volume,yAxis:1}),e}},{key:"render",value:function(){var t={chart:{height:100},legend:{enabled:!1},yAxis:[{title:{text:!1,visible:!1}},{title:{text:!1,visible:!1},opposite:!0}],labels:{visible:!1},title:{text:""},series:this.getSeriesData(this.props.processedData)};return r.a.createElement("div",null,r.a.createElement(M.a,{highcharts:H.a,options:t,key:this.props.key}))}}]),e}(n.Component),ct=(a(132),function(t){function e(t){var a;return Object(u.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).initalizeWatchlist=function(){var t=E();a.props.getWatchlistData(t.companies,(function(e){var n=[],r=[];a.props.getComparisionListData(t.companies,(function(c){var o=[];t.companies.forEach((function(t,e){for(var a=c[e],n=[],i=0;i<a.quarter.length;i++){var l=a.quarter[i],s=Number(a.revenue[i]),u=Number(a.profit[i]);n.push({date:l,revenue:s,profit:u})}o.push(n),r.push(function(t){var e=t.map((function(t){return t.revenue})),a=t.map((function(t){return t.profit})),n=O(e),r=O(a);return{profitScore:r,revenueScore:n,combinedScore:n+r,averageProfitScore:(r/(t.length-4)).toFixed(2),averageRevenueScore:(n/(t.length-4)).toFixed(2)}}(n))})),t.companies.forEach((function(t,c){var o=e[2*c],i=e[2*c+1],l=Object(G.a)(o.data.datasets[0].values.map((function(t){return Number(t[1])}))),s=Object(G.a)(i.data.datasets[0].values.map((function(t){return Number(t[1])}))),u=s.pop(),m=s.pop();l.splice(l.length-1,1,m,u);var p=Object(G.a)(o.data.datasets[1].values.map((function(t){return Number(t[1])}))),h=Object(G.a)(i.data.datasets[1].values.map((function(t){return Number(t[1])}))),d=h.pop(),f=h.pop();p.splice(p.length-1,1,f,d);var v=a.calculateChange(c,{price:l,volume:p}),b=a.getPriceChange(l,g);n.push(Object(A.a)({price:l[l.length-1],volume:p[p.length-1],growthScore:r[c],score:r[c].combinedScore,change:v},t,{historicalData:{price:l,volume:p},priceChange:b}))})),a.setState({watchlist:t,watchlistData:n,averagePriceChange:a.getAveragePriceChange(n,g)})}))}))},a.calculatePriceChange=function(t,e){var a=e?e+1:1,n=t[0]||0,r=t[a],c="NA";return r&&(c=(100*(c=(n-r)/r)).toFixed(2)),c},a.getPriceChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=[];t=t.slice(0).reverse();var r=!0,c=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value;n[s]=a.calculatePriceChange(t,s)}}catch(u){c=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(c)throw o}}return n},a.getAveragePriceChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;a[l]=D(t,l)}}catch(s){r=!0,c=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a},a.handleCheckboxChange=function(t,e){var n=a.state,r=n.watchlistData,c=n.watchlist,o=r[e];if("undefined"===typeof e){var i=!0,l=!1,s=void 0;try{for(var u,m=c.companies[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){u.value.checked=t.target.checked}}catch(y){l=!0,s=y}finally{try{i||null==m.return||m.return()}finally{if(l)throw s}}var p=!0,h=!1,d=void 0;try{for(var f,v=r[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){f.value.checked=t.target.checked}}catch(y){h=!0,d=y}finally{try{p||null==v.return||v.return()}finally{if(h)throw d}}}else{var g=t.target.checked,b=a.state.watchlist.companies.findIndex((function(t){return t.name===o.name}));c.companies[b].checked=g,o.checked=g}C(c),a.setState({watchlist:c,watchlistData:r})},a.compare=function(t){if(!t){var e=a.localData,n=e.watchlist,r=e.watchlistData;return a.setState({watchlist:n,watchlistData:r,averagePriceChange:a.getAveragePriceChange(r,g),compare:!1}),void(a.localData={})}var c=a.state,o=c.watchlistData,i=c.watchlist,l=o.filter((function(t){return t.checked})),s=Object(A.a)({},i,{companies:[]}),u=!0,m=!1,p=void 0;try{for(var h,d=function(){var t=h.value,e=i.companies.findIndex((function(e){return e.name===t.name}));s.companies.push(i.companies[e])},f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)d()}catch(v){m=!0,p=v}finally{try{u||null==f.return||f.return()}finally{if(m)throw p}}a.localData={watchlist:i,watchlistData:o},a.setState({watchlist:s,watchlistData:l,averagePriceChange:a.getAveragePriceChange(l,g),compare:!0})},a.removeStock=function(t){var e=Object(G.a)(a.state.watchlistData),n=e.splice(t,1)[0],r=a.state.watchlist,c=r.companies.findIndex((function(t){return t.name===n.name})),o=r.companies.splice(c,1)[0];return C(r),a.setState({watchlist:r,watchlistData:e,averagePriceChange:a.getAveragePriceChange(e,g)}),o},a.moveStock=function(t,e){var n=null;if(a.props.common.activeWatchlistIndex)n=a.removeStock(t);else{var r=Object(G.a)(a.state.watchlistData)[t],c=a.state.watchlist,o=c.companies.findIndex((function(t){return t.name===r.name}));n=c.companies[o]}if(n){var i="Item moved/copied successfully!!",l=b(),s=l.watchlistData[e];s.companies.find((function(t){return t.id===n.id}))?i="Item already exist in target watchlist!!":(s.companies.push(n),l.watchlistData[e]=s,y(l),l.watchlistData);var u={message:i};a.props.setError(u)}},a.renderChart=function(t,e){return r.a.createElement(rt,{key:e,processedData:t})},a.calculateChange=function(t,e){function a(t,e){var a="NA";if(t&&Array.isArray(t)&&t.length>1){var n=t[t.length-1],r=t[t.length-2];a=(100*(n-(e?0:r))/r).toFixed(2)}return a}return{price:a(e.price),volume:a(e.volume,!0)}},a.sortBy=function(t,e){var n=a.state,r=n.watchlistData,c=n.sortBy,o=a.state.sortOrder;o=c!==t||!o,r.sort((function(a,n){if(-1!==t.indexOf("priceChange")){var r=t.split("."),c=a[r[0]][r[1]],o=n[r[0]][r[1]];return c-o||isNaN(c)-isNaN(o)}return e?a[t]-n[t]:(a[t]||"").toLowerCase()>(n[t]||"").toLowerCase()?1:-1})),o||r.reverse(),a.setState({watchlistData:r,sortBy:t,sortOrder:o})},a.renderWatchlist=function(){var t=a.state,e=t.watchlist,n=t.watchlistData,c=t.averagePriceChange;if(!e||!n||!n.length)return null;var o=-1===e.companies.findIndex((function(t){return!t.checked})),i=[],l=!0,s=!1,u=void 0;try{for(var m,p=function(){var t=m.value,e=n.map((function(e){return Number(e.priceChange[t])})),a=z.a.max(e),r=z.a.min(e);i.push([r,a])},h=g[Symbol.iterator]();!(l=(m=h.next()).done);l=!0)p()}catch(f){s=!0,u=f}finally{try{l||null==h.return||h.return()}finally{if(s)throw u}}console.log(i),n.map((function(t){return t.priceChange}));var d=n.map((function(t,c){return r.a.createElement(nt,{key:t.name,index:c,item:t,handleCheckboxChange:function(t){return a.handleCheckboxChange(t,c)},renderChart:a.renderChart,removeStock:a.removeStock,moveStock:function(t){return a.moveStock(c,t)},watchlist:e,watchlistData:n,priceChangeRange:i})}));return r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(X.a.Check,{type:"checkbox",checked:o,onChange:a.handleCheckboxChange})),r.a.createElement("th",null,r.a.createElement("span",{onClick:function(){return a.sortBy("color")}},"Color")),r.a.createElement("th",null,r.a.createElement("span",{onClick:function(){return a.sortBy("score",!0)}},"Score")),r.a.createElement("th",{style:{width:"20%"}},r.a.createElement("span",{onClick:function(){return a.sortBy("name")}},"Company")),r.a.createElement("th",null,r.a.createElement("span",{onClick:function(){return a.sortBy("priceChange.0",!0)}},"Price ",r.a.createElement("small",null,"(",c[0],"% change)"))),c.map((function(t,e){return t&&e?r.a.createElement("th",null,r.a.createElement("div",{onClick:function(){return a.sortBy("priceChange.".concat(e),!0)}},e," WC ",t," %")):null})),r.a.createElement("th",null,"Rem."),r.a.createElement("th",{style:{width:"30%"}},"Chart ",r.a.createElement("small",null)))),r.a.createElement("tbody",null,d))},a.renderCompareView=function(){return r.a.createElement("div",null,!a.state.compare&&r.a.createElement("button",{onClick:function(){return a.compare(!0)},className:"btn"},"Compare selected stocks >"),a.state.compare&&r.a.createElement("button",{onClick:function(){return a.compare(!1)},className:"btn"},"Back to Main view >"))},a.render=function(){var t=((a.state.watchlist||{}).companies||[]).length;return r.a.createElement("div",null,r.a.createElement("h4",null,"Watchlist (",t," stocks)"),a.renderCompareView(),a.renderWatchlist(),a.renderCompareView())},a.state={},a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.initalizeWatchlist()}},{key:"componentWillReceiveProps",value:function(t){t.common.activeWatchlistIndex!==this.props.common.activeWatchlistIndex&&this.initalizeWatchlist()}}]),e}(r.a.Component)),ot={getWatchlistData:function(t,e){return function(a){var n=[];t.forEach((function(t){var e=t.id,a=_.a.get("http://localhost:3300/historicalData?companyId=".concat(e,"&duration=").concat(1850)),r=_.a.get("http://localhost:3300/historicalData?companyId=".concat(e,"&duration=",7));n.push(a),n.push(r)})),a({type:"SHOW_LOADER"}),Promise.all(n).then((function(t){var n=Object(Y.a)(t).slice(0);a({type:"HIDE_LOADER"}),e(n)}))}},setCompareList:function(t){return function(e){return e({type:"COMPARE_LIST",data:t})}},getComparisionListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return function(a){var n=[];t.forEach((function(t){var e=t.url,a=_.a.get("http://localhost:3300/consolidatedData?url=".concat(e));n.push(a)})),a({type:"SHOW_LOADER"}),Promise.all(n).then((function(t){var n=Object(Y.a)(t).slice(0);a({type:"HIDE_LOADER"});var r=[];n.forEach((function(t){r.push(K(t.data))})),e(r)}))}},setError:S},it=Object(i.b)((function(t){return{watchlist:t.watchlist,common:t.common}}),ot)(ct),lt=a(77),st=a.n(lt),ut=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader-inner-container"},r.a.createElement("img",{className:"img-spinner",src:st.a,alt:"loader"})))},mt=(a(133),a(134),null),pt={resetError:function(){return{type:"RESET_ERROR"}}},ht=Object(i.b)((function(t){return{error:t.common.error||{}}}),pt)((function(t){if(!t.error.message)return null;var e,a=t.error,n="error-bar ".concat(a.messageType||"error");return e=t.resetError,mt&&clearTimeout(mt),mt=setTimeout(e,5e3),r.a.createElement("div",{className:n},r.a.createElement("button",{className:"custom-button pull-right close",onClick:function(){return t.resetError()}},"\xd7"),a.isHtml?r.a.createElement("span",{dangerouslySetInnerHTML:{__html:a.message}}):r.a.createElement("span",null,a.message))})),dt=(a(135),a(24));var ft=Object(i.b)((function(t){return{common:t.common}}),null)((function(t){var e=t.common;return r.a.createElement("div",{className:"App"},e.showLoader&&r.a.createElement(ut,null),r.a.createElement(l.a,null,r.a.createElement(j,null),r.a.createElement(s,null),r.a.createElement(ht,null),r.a.createElement("div",{className:""},r.a.createElement(dt.a,{exact:!0,path:"/",component:V}),r.a.createElement(dt.a,{path:"/company",component:V}),r.a.createElement(dt.a,{path:"/watchlist",component:it}))))})),vt=a(31),gt=a(78),bt={cartItems:[]},yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_DATA":var a=Object(A.a)({},t);return a.cartItems=e.data,a;case"ADD_ITEM":var n=Object(A.a)({},t),r=n.cartItems.length?[n.cartItems.length-1].id+1:1;return n.cartItems.push({name:"XYZ",price:"$9.99",id:r}),n;case"REMOVE_ITEM":var c=t.cartItems.filter((function(t){return t.id!==e.data.id}));return{cartItems:c};default:return t}},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartTotal:"500",checkboxSelectionList:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHECKBOX_SELECTION_LIST":return Object(A.a)({},t,{checkboxSelectionList:e.data});default:return t}},Ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type,t},wt=b(),Dt=Object(A.a)({showLoader:!1,compareList:[]},wt,{error:null}),Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_LOADER":var a=Object.assign({},t);return a.showLoader=!0,a;case"HIDE_LOADER":var n=Object.assign({},t);return n.showLoader=!1,n;case"COMPARE_LIST":return Object(A.a)({},t,{compareList:e.data});case"RESET_ERROR":return Object(A.a)({},t,{error:null});case"SET_ERROR":return Object(A.a)({},t,{error:e.data});case"ACTIVE_WATCHLIST_CHANGED":return Object(A.a)({},t,{activeWatchlistIndex:e.data});case"WATCHLIST_CHANGED":return Object(A.a)({},t,{watchlistData:e.data});case"METADATA_CHANGED":return Object(A.a)({},t,{metadata:e.data});case"NEW_WATCHLIST_ADDED":return Object(A.a)({},t,{watchlistData:e.data.watchlistData});default:return t}},St=Object(vt.c)({comapny:yt,watchlist:Et,comparision:Ct,common:Ot}),kt=Object(vt.a)(gt.a),Nt=Object(vt.d)(St,kt);o.a.render(r.a.createElement(i.a,{store:Nt},r.a.createElement(ft,null)),document.getElementById("root"))},52:function(t,e,a){},77:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},80:function(t,e,a){t.exports=a(136)},89:function(t,e,a){},90:function(t,e,a){},92:function(t,e,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.5ae27e56.chunk.js.map